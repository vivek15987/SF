public class RMPullPropertiesController {
    public String IntegrationPartnerID, ApiKey, strMarketing4_0, strGetProperties; 
    public Set<String> PropertyCodes = new Set<String>();
    public RMPullPropertiesResponseController objRMPullPropertiesResponse;
    public List<Property__c> arrobjProperties = new List<Property__c>(); 
    public Set<String> GroupingsWithDoNotUpdateNames = new Set<String>();
    
    public RMPullPropertiesController() {
        IntegrationPartnerID = '1076';
        ApiKey = 'a262bb82902b4e3491807044e0c6986e';
    }
    
    public void RMPullProperties( Boolean isRMPullPropertiesScheduler ) {
        //Get Integrations.
        
        Map<String, List<Integration__c>> IntegrationObjectsPerAccount = new Map<String,List<Integration__c>>();
        List<AggregateResult> ActiveAccountList = [ SELECT
                                                       Account__c
                                                     FROM
                                                       Integration__c
                                                     WHERE
                                                         ResMan_Integration_Active__c = true AND Get_ResMan_Properties__c != NULL AND ResMan_Account_Id__c != NULL 
                                                     GROUP BY
                                                       Account__c
                                                  ];
        
        if( !ActiveAccountList.isEmpty() ) {
            Set<String>AccoutIds = new Set<String>();
            for( AggregateResult ActiveAccount :ActiveAccountList ){
                AccoutIds.add( String.valueOf( ActiveAccount.get('Account__c') ) );
            }
            
            List<Integration__c> IntegationsOfAllAccounts = [ SELECT 
                                                                      Id, Account__c, Name, Do_Not_Update_Names_Of__c, Grouping__c
                                                                      FROM
                                                                      Integration__c
                                                                      WHERE
                                                                      Account__c IN :AccoutIds ORDER BY Grouping__c];
            for( String AccountId :AccoutIds ) {
                List<Integration__c> Integrations = new List<Integration__c>();
                for( Integration__c i :IntegationsOfAllAccounts ){
                    if( i.Account__c == AccountId ) {
                        Integrations.add( i );
                    }
                }
                IntegrationObjectsPerAccount.put( AccountId , Integrations );
            }
        }
        
        if( !ActiveAccountList.isEmpty() ) {
            try {
                for( AggregateResult ActiveAccount: ActiveAccountList ) {
                    Integration__c I = [ SELECT 
                                          Id, Name, Account__c, ResMan_API_URL__c, ResMan_API_Key__c, ResMan_Integration_Partner_ID__c, ResMan_Account_Id__c, Do_Not_Update_Names_Of__c
                                        FROM
                                          Integration__c
                                        WHERE
                                          ResMan_Integration_Active__c = true AND Get_ResMan_Properties__c != NULL AND ResMan_Account_Id__c != NULL AND ResMan_API_URL__c != NULL AND ResMan_Integration_Partner_ID__c != NULL AND Account__c =: String.valueOf(ActiveAccount.get('Account__c'))
                                        LIMIT 1
                                       ];    

                    if( null != I ) {
                        this.RMGetProperties( I.ResMan_API_URL__c, I.ResMan_Account_Id__c, isRMPullPropertiesScheduler );
                        
                        List<Integration__c> IntegationsPerAccount = new List<Integration__c>();
                        if( IntegrationObjectsPerAccount.containsKey( I.Account__c ) ) {
                            IntegationsPerAccount = IntegrationObjectsPerAccount.get( I.Account__c );
                        }
                        //System.debug('IntegrationObjectsPerAccount - ' + IntegrationObjectsPerAccount);
                        //System.debug('I.Account__c - ' + I.Account__c);
                        if( !PropertyCodes.isEmpty() ) {
                            
                            List<Property__c> Properties = new List<Property__c>();
                            Properties = [ SELECT Id, Active__c, ResMan_Property_Id__c,Group_Membership__c FROM Property__c WHERE ResMan_Property_Id__c IN : PropertyCodes AND Account__c =: I.Account__c];
                            
                            Map<String, String> GroupIdPerPropertyId = new Map<String, String>();
                            Map<String, String> PropertyCodesIds = new Map<String, String>();
                            Map<String, String> PropertyCodesActive = new Map<String, String>();
                            
                            for( Property__c Property: Properties ) {
                                PropertyCodesIds.put( Property.ResMan_Property_Id__c, Property.Id );
                                PropertyCodesActive.put( Property.ResMan_Property_Id__c, Property.Active__c );
                                if( null != Property.Group_Membership__c )
                                    GroupIdPerPropertyId.put( Property.Id, Property.Group_Membership__c );
                            }
                            
                            for( String PropertyCode: PropertyCodes ) {
                                objRMPullPropertiesResponse = null;
                                
                                this.RMGetMarketing4_0( I.ResMan_API_URL__c, I.ResMan_Account_Id__c, PropertyCode, isRMPullPropertiesScheduler );
                                
                                if( null != objRMPullPropertiesResponse && !objRMPullPropertiesResponse.PropertiesBasicInfo.isEmpty() ) {
                                    Property__c p = new Property__c();
                                    
                                    if( PropertyCodesIds.containsKey(PropertyCode) ) {
                                        p.Id           = PropertyCodesIds.get( PropertyCode );
                                       // if( PropertyCodesActive.get( PropertyCode ) == 'No' )  p.Active__c     = 'Newly Active Queue';
                                    } else {
                                        p.ResMan_Property_Id__c = PropertyCode;
                                        p.Active__c       = 'New Property Queue';     
                                        p.Price__c         = 1;
                                        p.Price__c        = 1;
                                        p.Account__c         = I.Account__c;
                                        p.Square_Footage__c   = 1;
                                        p.Bed_Count__c       = 1;
                                        p.Bath_Count__c     = 1;
                                        p.Lease_Terms__c     = 1;
                                    }
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('UnitCount') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('UnitCount') )
                                        p.Unit_Count__c = Integer.ValueOf( objRMPullPropertiesResponse.PropertiesBasicInfo.get('UnitCount') );
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('Country') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('Country') )
                                        p.Country__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('Country');
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('City') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('City') )
                                        p.City__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('City');
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('LongDescription') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('LongDescription') )
                                        p.Description__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('LongDescription');
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('PostalCode') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('PostalCode') )
                                        p.Zip_Code__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('PostalCode');
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('State') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('State') )
                                        p.State__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('State');
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('Email') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('Email') )
                                        p.Property_Email__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('Email');
                                    
                                    //IntegationsPerAccount
                                    //Boolean DoNotUpdatePropertyName = ( null != I.Do_Not_Update_Names_Of__c && I.Do_Not_Update_Names_Of__c.contains( 'Properties' ) ? true :false );
                                    Boolean DoNotUpdatePropertyName=false;
                                    if( IntegationsPerAccount.size() > 0 ) {
                                        for( Integration__c integration_obj: IntegationsPerAccount ) {
                                            if( integration_obj.Grouping__c == null ) {
                                                if( integration_obj.Do_Not_Update_Names_Of__c != null && integration_obj.Do_Not_Update_Names_Of__c.contains( 'Properties' ) ) {
                                                    DoNotUpdatePropertyName = true;
                                                    break;
                                                }
                                            }
                                        }
                                        
                                        for( Integration__c integration_obj: IntegationsPerAccount ) {
                                            if( integration_obj.Grouping__c != null && integration_obj.Do_Not_Update_Names_Of__c != null && integration_obj.Do_Not_Update_Names_Of__c.contains( 'Properties' ) ) {
                                                GroupingsWithDoNotUpdateNames.add( integration_obj.Grouping__c );
                                            }
                                        }
                                        
                                        if( false == DoNotUpdatePropertyName && GroupIdPerPropertyId.containsKey( p.Id ) && GroupingsWithDoNotUpdateNames.contains( GroupIdPerPropertyId.get( p.Id ) ) ) {
                                            DoNotUpdatePropertyName = true;
                                        }
                                    }
                                    if( ( !PropertyCodesIds.containsKey(PropertyCode) || false == DoNotUpdatePropertyName ) && objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('MarketingName') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('MarketingName') )
                                        p.Name = objRMPullPropertiesResponse.PropertiesBasicInfo.get('MarketingName');
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('Website') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('Website') )
                                        p.Company_Website__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('Website');
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('faxPhoneNumber') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('faxPhoneNumber') )
                                        p.Fax_Number__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('faxPhoneNumber');
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('Sunday') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('Sunday') )
                                        p.Sunday__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('Sunday');
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('Monday') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('Monday') )
                                        p.Monday__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('Monday');
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('Tuesday') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('Tuesday') )
                                        p.Tuesday__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('Tuesday');
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('Wednesday') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('Wednesday') )
                                        p.Wednesday__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('Wednesday');
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('Thursday') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('Thursday') )
                                        p.Thursday__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('Thursday');
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('Friday') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('Friday') )
                                        p.Friday__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('Friday');
                                    
                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('Saturday') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('Saturday') )
                                        p.Saturday__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('Saturday');

                                    if( objRMPullPropertiesResponse.PropertiesBasicInfo.containsKey('Amenity') && null != objRMPullPropertiesResponse.PropertiesBasicInfo.get('Amenity') )
                                        p.Community_Amenity_Additional_Info__c = objRMPullPropertiesResponse.PropertiesBasicInfo.get('Amenity'); 
                                    
                                    arrobjProperties.add(p);
                                }
                            }
                        }
                    }
                }
            } catch( Exception e ) {
                System.debug( e.getMessage() );
                System.debug( e.getStackTraceString() );
                
            } 
        }
    }
    
    public void RMGetProperties( String RMURL, String AccountId, Boolean isRMPullPropertiesScheduler ) {
        
        Http httpPro = new Http();
        HttpRequest request = new HttpRequest();
        String BodyContent = 'IntegrationPartnerID=' + this.IntegrationPartnerID + '&ApiKey=' + this.ApiKey + '&AccountID=' + AccountId;
        request.setEndPoint( RMURL + 'Account/GetProperties?');
        request.setMethod( 'POST' );
        request.setHeader( 'Content-Type', 'application/x-www-form-urlencoded' );
        request.setHeader( 'Accept' , 'application/json');
        request.setBody( BodyContent );
        request.setHeader('Content-Length', '100'); 
        request.setTimeout( 120000 );
        
        if( true == isRMPullPropertiesScheduler ) {
            HTTPResponse res = httpPro.send(request);
            strGetProperties = res.getBody();   
            System.debug('pppppp :' + strGetProperties );
            strGetProperties = strGetProperties.unescapeHtml4();
        }

        PropertyCodes.clear();
        //strGetProperties = '{ "Properties": [ { "PropertyID": "B342E58C-F5BA-4C63-B050-CF44439BB37D", "Name": "Property One", "StreetAddress": "123 Main St", "City": "Denver", "State": "CO", "Zip": "80202", "Phone": "(123) 456-7890", "Email": "donotreply@prop1.com", "Manager": "John Manager" } ], "MethodName": "GetProperties", "Status": "Success", "AccountID": 400 }';
        
        if( !String.isEmpty(strGetProperties) ) {
            Map<String, Object> jsonObjectProperties        = (Map<String, Object>) JSON.deserializeUntyped(strGetProperties);
            if( jsonObjectProperties.containsKey( 'Properties' ) ) {
                List<Object>Properties_temp                            = ( List<Object> )  jsonObjectProperties.get( 'Properties' );
                if( null != Properties_temp ) {
                    for( Object Property_temp: Properties_temp ) {
                        Map<String, Object> PropertyCode_temp         = ( Map<String,Object> ) Property_temp;
                        if( PropertyCode_temp.containsKey( 'PropertyID' ) ) {
                            PropertyCodes.add( String.valueOf( PropertyCode_temp.get( 'PropertyID' ) ) ); 
                        }
                    }
                }
            }
        }
    }
    
    public void RMGetMarketing4_0( String RMURL, String AccountId, String RMPropertyId, Boolean isRMPullPropertiesScheduler ) {
        
        Http httpPro = new Http();
        HttpRequest request = new HttpRequest();
        String BodyContent = 'IntegrationPartnerID=' + this.IntegrationPartnerID + '&ApiKey=' + this.ApiKey + '&AccountID=' + AccountId + '&PropertyID=' + RMPropertyId;
        request.setEndPoint( RMURL + 'MITS/GetMarketing4_0?');
        request.setMethod( 'POST' );
        request.setHeader( 'Content-Type', 'application/x-www-form-urlencoded' );
        request.setBody( BodyContent );
        request.setHeader('Content-Length', '100'); 
        request.setHeader( 'Accept' , 'application/xml');
        request.setTimeout( 120000 );
        
        
        if( true == isRMPullPropertiesScheduler ) {
            HTTPResponse res = httpPro.send(request);
            strMarketing4_0 = res.getBody();   
        }
         
        //strMarketing4_0 = '<ResMan><MethodName>GetMarketing4_0</MethodName><Status>Success</Status><AccountID>400</AccountID><PropertyID>b342e58c-f5ba-4c63-b050-cf44439bb37d</PropertyID><Response><?xml version="1.0" encoding="utf-16"?> <PhysicalProperty xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> <Property> <Identification IDValue="b342e58c-f5ba-4c63-b050-cf44439bb37d" OrganizationName="ResMan" IDType="PropertyID" /> <Identification IDValue="400" OrganizationName="ResMan" IDType="AccountID" /> <PropertyID> <Identification IDValue="b342e58c-f5ba-4c63-b050-cf44439bb37d" OrganizationName="ResMan" IDType="PropertyID" /> <MarketingName>Frontline Fairways</MarketingName> <Address AddressType="Property"> <City>Broomfield</City> <State>CO</State> <PostalCode> </PostalCode> <Country>United States</Country> </Address> <Phone PhoneType="personal"> <PhoneNumber> </PhoneNumber> </Phone> <Phone PhoneType="fax"> <PhoneNumber> </PhoneNumber> </Phone> <Email>Info@falsewebsite.com</Email> </PropertyID> <ILS_Identification ILS_IdentificationType="Unspecified" RentalType="Unspecified"> <Latitude>29.42729</Latitude> <Longitude>-98.652874</Longitude> </ILS_Identification> <Information> <StructureType>Unspecified</StructureType> <BuildingCount>18</BuildingCount> <UnitCount>293</UnitCount> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>10:00 AM</CloseTime> <Day>Sunday</Day> </OfficeHour> <OfficeHour> <OpenTime>2:00 PM</OpenTime> <CloseTime>4:00 PM</CloseTime> <Day>Sunday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Monday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Tuesday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Wednesday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Thursday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Friday</Day> </OfficeHour> <OfficeHour> <OpenTime>10:00 AM</OpenTime> <CloseTime>4:00 PM</CloseTime> <Day>Saturday</Day> </OfficeHour> <ShortDescription>Live A Luxurious Life Style At ABC Property</ShortDescription> <LongDescription>ABC Property is a beautiful, pet friendly community.Convenient and easy access to major highways. The community features a resort style pool, access gates, car care station, pet walk courtyards,health and sports complex. ABC Property features 1, 2, and 3 bedroom apartments for rent with washer/dryer provided, tanning facility, stainless steal appliances, business center, High Speed Internet and more.</LongDescription> <LeaseLength>12 month leases</LeaseLength> <Parking ParkingType="Covered Lot"> <Assigned>false</Assigned> <AssignedFee>Paid</AssignedFee> <SpaceFee>35.00</SpaceFee> <Spaces>5</Spaces> <Comment>Only 5 Covered Parking Spaces Left Don\'t Chance It Texas Weather!</Comment> </Parking> <DrivingDirections>Driving directions to the property</DrivingDirections> <Services Nearest="true"> <Name>Elementary School</Name> <Detail>Barton Elementary </Detail> <DistanceTo>less than a mile away</DistanceTo> <Comment>Close to home</Comment> </Services> <Services Nearest="true"> <Name>Highway</Name> <Detail>Close To All Major Highways</Detail> <DistanceTo>Highway 121 1 street light from the property and 8 minutes from Highway 75 !</DistanceTo> </Services> <Services Nearest="false"> <Name>Other</Name> <Detail>Tanning Facility</Detail> <DistanceTo>Property Clubhouse</DistanceTo> <Comment>Ask an associate about all of the amenities available!</Comment> </Services> <PropertyAvailabilityURL>https://demo.myresman.com/Portal/Applicants/Availability?a=400&amp;p=b342e58c-f5ba-4c63-b050-cf44439bb37d</PropertyAvailabilityURL> </Information> <Fee> <ProrateType>Standard</ProrateType> <LateType>Flat</LateType> <LatePercent>0</LatePercent> <LateMinFee>10.0000</LateMinFee> <LateFeePerDay>50.0000</LateFeePerDay> <NonRefundableHoldFee>0</NonRefundableHoldFee> <AdminFee>149.0000</AdminFee> <ApplicationFee>0</ApplicationFee> <BrokerFee>0</BrokerFee> </Fee> <Amenity AmenityType="Availability24Hours"> <Description>Secure entry</Description> </Amenity> <Building> <Identification IDValue="15" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>15</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="11" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>11</Name> <Description /> <UnitCount>12</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="8" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>8</Name> <Description /> <UnitCount>8</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="Ramiro\'s Place" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>Ramiro\'s Place</Name> <Description /> <UnitCount>1</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="17" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>17</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="1" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>1</Name> <Description /> <UnitCount>39</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="7" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>7</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="16" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>16</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="5" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>5</Name> <Description /> <UnitCount>12</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="10" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>10</Name> <Description /> <UnitCount>8</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="9" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>9</Name> <Description /> <UnitCount>13</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="14" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>14</Name> <Description /> <UnitCount>12</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="2" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>2</Name> <Description /> <UnitCount>17</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="12" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>12</Name> <Description /> <UnitCount>23</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="13" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>13</Name> <Description /> <UnitCount>12</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="4" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>4</Name> <Description /> <UnitCount>8</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="3" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>3</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="6" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>6</Name> <Description /> <UnitCount>8</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Floorplan> <Identification IDValue="B2" OrganizationName="ResMan" IDType="Name" /> <Name>Two Bedroom, Two Bath</Name> <Comment>The Savannah is our two bedroom, two bathroom apartment home. The Savannah has a spacious living room area with an island kitchen &amp; breakfast bar counter top to entertain guests when you\'re playing host/hostess. Your lovely kitchen has a pantry closet to stock up on all your favorite groceries and a tremendous amount of counter space to utilize when working on a gourmet meal. The Savannah also has a separate dining area with an window view to enjoy the outdoor scenery. This home has a built-in desk &amp; bookshelf for you to set up your office-at-home. The guest bedroom is spaciously designed and accustomed with a walk-in closet. The Savannah also has gorgeous open guest bathroom with a linen closet for your convenience. The master bedroom is tremendously large and conveniently has the master bathroom located in the bedroom, which includes a full-size linen closet and walk-in closet as well.</Comment> <UnitCount>25</UnitCount> <UnitsAvailable>0</UnitsAvailable> <Room RoomType="Bedroom"> <Count>2</Count> <Comment /> </Room> <Room RoomType="Bathroom"> <Count>2.0</Count> <Comment /> </Room> <SquareFeet Avg="954" Min="954" Max="954" /> <MarketRent Min="975" Max="1000" /> <EffectiveRent Avg="978" Min="975" Max="1000" /> <Deposit DepositType="deposit"> <Amount AmountType="Actual"> <ValueRange Exact="200.00" /> </Amount> <Description>Escrow Deposit Paid In</Description> <PercentRefundable>100</PercentRefundable> <PortionRefundable>100</PortionRefundable> </Deposit> </Floorplan> <Floorplan> <Identification IDValue="A1" OrganizationName="ResMan" IDType="Name" /> <Name>One Bedroom, One Bath</Name> <Comment>The Krista is our one bedroom, one bathroom apartment home of 587 sq ft. This gorgeous floor plan has an open concept in the living room &amp; kitchen area. There is a tremendous amount of cabinetry and counter space for you to enjoy within your kitchen. The Krista has additional storage space in the coat closet by the entrance. In your living room, you have a large window view that allows you to enjoy the outdoor scenery. The Krista also has a large walk-in closet and a beautiful vanity area in your bathroom that is located in the bedroom. </Comment> <UnitCount>79</UnitCount> <UnitsAvailable>3</UnitsAvailable> <Room RoomType="Bedroom"> <Count>1</Count> <Comment /> </Room> <Room RoomType="Bathroom"> <Count>1.0</Count> <Comment /> </Room> <SquareFeet Avg="587" Min="587" Max="587" /> <MarketRent Min="7" Max="732" /> <EffectiveRent Avg="673" Min="-23" Max="732" /> <Deposit DepositType="deposit"> <Amount AmountType="Actual"> <ValueRange Exact="100.00" /> </Amount> <Description>Escrow Deposit Paid In</Description> <PercentRefundable>100</PercentRefundable> <PortionRefundable>100</PortionRefundable> </Deposit> <File FileID="" Active="true"> <FileType>Floorplan</FileType> <Name>floorplan-krista.jpg</Name> <Format /> <Src>https://resman.blob.core.windows.net/demo-public/d6855366-63ff-4ccd-ab36-e6f15c916226.jpg</Src> <Rank /> </File> <File FileID="26978c6f-3ece-4310-a953-f184a24fdf23" Active="true"> <FileType>Photo</FileType> <Name>Inside.jpg</Name> <Format>.jpg</Format> <Src>https://resman.blob.core.windows.net/demo-public/105f5355-93fd-4a65-8f25-fa630caa7dfb.jpg</Src> <Rank>2</Rank> </File> </Floorplan> <ILS_Unit> <Identification IDValue="17308" OrganizationName="ResMan" IDType="Number" /> <Units> <Unit> <Identification IDValue="17308" OrganizationName="ResMan" IDType="Number" /> <MarketingName>17308</MarketingName> <UnitType>A1</UnitType> <UnitBedrooms>1</UnitBedrooms> <UnitBathrooms>1</UnitBathrooms> <MinSquareFeet>587</MinSquareFeet> <MaxSquareFeet>587</MaxSquareFeet> <MarketRent>695</MarketRent> <UnitEconomicStatus>residential</UnitEconomicStatus> <UnitOccupancyStatus>occupied</UnitOccupancyStatus> <UnitLeasedStatus>leased</UnitLeasedStatus> <FloorplanName>One Bedroom, One Bath</FloorplanName> <BuildingName>17</BuildingName> <Address AddressType="property"> <AddressLine1>1538 Cable Ranch Rd.</AddressLine1> <AddressLine2>17308</AddressLine2> <City>San Antonio</City> <State>TX</State> <PostalCode>78245</PostalCode> </Address> </Unit> </Units> <Pricing> <MITS-OfferTerm> <EffectiveRent>695.00</EffectiveRent> <Term>12</Term> </MITS-OfferTerm> <MITS-OfferTerm> <EffectiveRent>690.00</EffectiveRent> <Term>14</Term> </MITS-OfferTerm> <MITS-OfferTerm> <EffectiveRent>685.00</EffectiveRent> <Term>16</Term> </MITS-OfferTerm> <MITS-OfferTerm> <EffectiveRent>675.00</EffectiveRent> <Term>18</Term> </MITS-OfferTerm> <MITS-OfferTerm> <EffectiveRent>670.00</EffectiveRent> <Term>20</Term> </MITS-OfferTerm> <MITS-OfferTerm> <EffectiveRent>668.00</EffectiveRent> <Term>22</Term> </MITS-OfferTerm> <MITS-OfferTerm> <EffectiveRent>665.00</EffectiveRent> <Term>24</Term> </MITS-OfferTerm> </Pricing> <EffectiveRent Avg="678" Min="665" Max="695" /> <Deposit DepositType="deposit"> <Amount AmountType="Actual"> <ValueRange Exact="100.00" /> </Amount> <Description>Escrow Deposit Paid In</Description> <PercentRefundable>100</PercentRefundable> <PortionRefundable>100</PortionRefundable> </Deposit> <FloorLevel>3</FloorLevel> <Availability> <VacateDate Month="2" Day="12" Year="2015" /> <VacancyClass>Occupied</VacancyClass> <MadeReadyDate Month="2" Day="20" Year="2015" /> </Availability> </ILS_Unit> <ILS_Unit> <Identification IDValue="10-201" OrganizationName="ResMan" IDType="Number" /> <Units> <Unit> <Identification IDValue="10-201" OrganizationName="ResMan" IDType="Number" /> <MarketingName>10-201</MarketingName> <UnitType>B1</UnitType> <UnitBedrooms>1</UnitBedrooms> <UnitBathrooms>2</UnitBathrooms> <MinSquareFeet>881</MinSquareFeet> <MaxSquareFeet>881</MaxSquareFeet> <MarketRent>905</MarketRent> <UnitEconomicStatus>residential</UnitEconomicStatus> <UnitOccupancyStatus>occupied</UnitOccupancyStatus> <UnitLeasedStatus>leased</UnitLeasedStatus> <FloorplanName>Two Bedroom, One Bath</FloorplanName> <BuildingName>1</BuildingName> <Address AddressType="property"> <AddressLine1>2636 Grand Ave 201</AddressLine1> <City>San Diego</City> <State>CA</State> <PostalCode>92109</PostalCode> <Country /> </Address> </Unit> </Units> <Pricing> <MITS-OfferTerm> <EffectiveRent>905.00</EffectiveRent> <Term>12</Term> </MITS-OfferTerm> </Pricing> <EffectiveRent Avg="905" Min="905" Max="905" /> <Deposit DepositType="deposit"> <Amount AmountType="Actual"> <ValueRange Exact="200.00" /> </Amount> <Description>Escrow Deposit Paid In</Description> <PercentRefundable>100</PercentRefundable> <PortionRefundable>100</PortionRefundable> </Deposit> <FloorLevel>1</FloorLevel> <Availability> <VacateDate Month="2" Day="12" Year="2015" /> <VacancyClass>Occupied</VacancyClass> <MadeReadyDate Month="2" Day="20" Year="2015" /> </Availability> </ILS_Unit> <Utility> <AirCon>false</AirCon> <BroadbandInternet>true</BroadbandInternet> <Cable>false</Cable> <Electric>false</Electric> <Gas>false</Gas> <Heat>false</Heat> <HotWater>false</HotWater> <Satellite>false</Satellite> <Sewer>false</Sewer> <Telephone>false</Telephone> <Trash>false</Trash> <Water>false</Water> <UtilityPortionIncluded>0.00</UtilityPortionIncluded> </Utility> <File FileID="71fe9d37-17f3-49ef-9df1-1d4b19ee65ad" Active="true"> <FileType>Photo</FileType> <Name>IMG_1090.jpg</Name> <Format>.jpg</Format> <Src>https://resman.blob.core.windows.net/demo-public/f112e064-c35e-4495-a327-34a4cee895d3.jpg</Src> <Rank>12</Rank> </File> <File FileID="5e3c45b9-d6a7-4e80-a11c-311f194c937a" Active="true"> <FileType>Photo</FileType> <Name>12 Ext-3.jpg</Name> <Format>.jpg</Format> <Src>https://resman.blob.core.windows.net/demo-public/f3ba2d00-440a-4624-9ba7-1ebdf188d4f1.jpg</Src> <Rank>12</Rank> </File> </Property> </PhysicalProperty></Response></ResMan>';
    //strMarketing4_0 = '<ResMan><MethodName>GetMarketing4_0</MethodName><Status>Success</Status><AccountID>400</AccountID><PropertyID>b342e58c-f5ba-4c63-b050-cf44439bb37d</PropertyID><Response><?xml version="1.0" encoding="utf-16"?> <PhysicalProperty xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> <Property> <Identification IDValue="b342e58c-f5ba-4c63-b050-cf44439bb37d" OrganizationName="ResMan" IDType="PropertyID" /> <Identification IDValue="400" OrganizationName="ResMan" IDType="AccountID" /> <PropertyID> <Identification IDValue="b342e58c-f5ba-4c63-b050-cf44439bb37d" OrganizationName="ResMan" IDType="PropertyID" /> <MarketingName>Frontline Fairways</MarketingName> <Address AddressType="Property"> <City>Broomfield</City> <State>CO</State> <PostalCode> </PostalCode> <Country>United States</Country> </Address> <Phone PhoneType="personal"> <PhoneNumber> </PhoneNumber> </Phone> <Phone PhoneType="fax"> <PhoneNumber> </PhoneNumber> </Phone> <Email>Info@falsewebsite.com</Email> </PropertyID> <ILS_Identification ILS_IdentificationType="Unspecified" RentalType="Unspecified"> <Latitude>29.42729</Latitude> <Longitude>-98.652874</Longitude> </ILS_Identification> <Information> <StructureType>Unspecified</StructureType> <BuildingCount>18</BuildingCount> <UnitCount>293</UnitCount> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>10:00 AM</CloseTime> <Day>Sunday</Day> </OfficeHour> <OfficeHour> <OpenTime>2:00 PM</OpenTime> <CloseTime>4:00 PM</CloseTime> <Day>Sunday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Monday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Tuesday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Wednesday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Thursday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Friday</Day> </OfficeHour> <OfficeHour> <OpenTime>10:00 AM</OpenTime> <CloseTime>4:00 PM</CloseTime> <Day>Saturday</Day> </OfficeHour> <ShortDescription>Live A Luxurious Life Style At ABC Property</ShortDescription> <LongDescription>ABC Property is a beautiful, pet friendly community.Convenient and easy access to major highways. The community features a resort style pool, access gates, car care station, pet walk courtyards,health and sports complex. ABC Property features 1, 2, and 3 bedroom apartments for rent with washer/dryer provided, tanning facility, stainless steal appliances, business center, High Speed Internet and more.</LongDescription> <LeaseLength>12 month leases</LeaseLength> <Parking ParkingType="Covered Lot"> <Assigned>false</Assigned> <AssignedFee>Paid</AssignedFee> <SpaceFee>35.00</SpaceFee> <Spaces>5</Spaces> <Comment>Only 5 Covered Parking Spaces Left Don\'t Chance It Texas Weather!</Comment> </Parking> <DrivingDirections>Driving directions to the property</DrivingDirections> <Services Nearest="true"> <Name>Elementary School</Name> <Detail>Barton Elementary </Detail> <DistanceTo>less than a mile away</DistanceTo> <Comment>Close to home</Comment> </Services> <Services Nearest="true"> <Name>Highway</Name> <Detail>Close To All Major Highways</Detail> <DistanceTo>Highway 121 1 street light from the property and 8 minutes from Highway 75 !</DistanceTo> </Services> <Services Nearest="false"> <Name>Other</Name> <Detail>Tanning Facility</Detail> <DistanceTo>Property Clubhouse</DistanceTo> <Comment>Ask an associate about all of the amenities available!</Comment> </Services> <PropertyAvailabilityURL>https://demo.myresman.com/Portal/Applicants/Availability?a=400&amp;p=b342e58c-f5ba-4c63-b050-cf44439bb37d</PropertyAvailabilityURL> </Information> <Fee> <ProrateType>Standard</ProrateType> <LateType>Flat</LateType> <LatePercent>0</LatePercent> <LateMinFee>10.0000</LateMinFee> <LateFeePerDay>50.0000</LateFeePerDay> <NonRefundableHoldFee>0</NonRefundableHoldFee> <AdminFee>149.0000</AdminFee> <ApplicationFee>0</ApplicationFee> <BrokerFee>0</BrokerFee> </Fee> <Amenity AmenityType="Availability24Hours"> <Description>Secure entry</Description> </Amenity> <Building> <Identification IDValue="15" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>15</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="11" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>11</Name> <Description /> <UnitCount>12</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="8" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>8</Name> <Description /> <UnitCount>8</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="Ramiro\'s Place" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>Ramiro\'s Place</Name> <Description /> <UnitCount>1</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="17" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>17</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="1" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>1</Name> <Description /> <UnitCount>39</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="7" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>7</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="16" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>16</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="5" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>5</Name> <Description /> <UnitCount>12</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="10" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>10</Name> <Description /> <UnitCount>8</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="9" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>9</Name> <Description /> <UnitCount>13</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="14" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>14</Name> <Description /> <UnitCount>12</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="2" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>2</Name> <Description /> <UnitCount>17</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="12" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>12</Name> <Description /> <UnitCount>23</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="13" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>13</Name> <Description /> <UnitCount>12</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="4" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>4</Name> <Description /> <UnitCount>8</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="3" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>3</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="6" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>6</Name> <Description /> <UnitCount>8</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Floorplan> <Identification IDValue="B2" OrganizationName="ResMan" IDType="Name" /> <Name>Two Bedroom, Two Bath</Name> <Comment>The Savannah is our two bedroom, two bathroom apartment home. The Savannah has a spacious living room area with an island kitchen &amp; breakfast bar counter top to entertain guests when you\'re playing host/hostess. Your lovely kitchen has a pantry closet to stock up on all your favorite groceries and a tremendous amount of counter space to utilize when working on a gourmet meal. The Savannah also has a separate dining area with an window view to enjoy the outdoor scenery. This home has a built-in desk &amp; bookshelf for you to set up your office-at-home. The guest bedroom is spaciously designed and accustomed with a walk-in closet. The Savannah also has gorgeous open guest bathroom with a linen closet for your convenience. The master bedroom is tremendously large and conveniently has the master bathroom located in the bedroom, which includes a full-size linen closet and walk-in closet as well.</Comment> <UnitCount>25</UnitCount> <UnitsAvailable>0</UnitsAvailable> <Room RoomType="Bedroom"> <Count>2</Count> <Comment /> </Room> <Room RoomType="Bathroom"> <Count>2.0</Count> <Comment /> </Room> <SquareFeet Avg="954" Min="954" Max="954" /> <MarketRent Min="975" Max="1000" /> <EffectiveRent Avg="978" Min="975" Max="1000" /> <Deposit DepositType="deposit"> <Amount AmountType="Actual"> <ValueRange Exact="200.00" /> </Amount> <Description>Escrow Deposit Paid In</Description> <PercentRefundable>100</PercentRefundable> <PortionRefundable>100</PortionRefundable> </Deposit> </Floorplan> <Floorplan> <Identification IDValue="A1" OrganizationName="ResMan" IDType="Name" /> <Name>One Bedroom, One Bath</Name> <Comment>The Krista is our one bedroom, one bathroom apartment home of 587 sq ft. This gorgeous floor plan has an open concept in the living room &amp; kitchen area. There is a tremendous amount of cabinetry and counter space for you to enjoy within your kitchen. The Krista has additional storage space in the coat closet by the entrance. In your living room, you have a large window view that allows you to enjoy the outdoor scenery. The Krista also has a large walk-in closet and a beautiful vanity area in your bathroom that is located in the bedroom. </Comment> <UnitCount>79</UnitCount> <UnitsAvailable>3</UnitsAvailable> <Room RoomType="Bedroom"> <Count>1</Count> <Comment /> </Room> <Room RoomType="Bathroom"> <Count>1.0</Count> <Comment /> </Room> <SquareFeet Avg="587" Min="587" Max="587" /> <MarketRent Min="7" Max="732" /> <EffectiveRent Avg="673" Min="-23" Max="732" /> <Deposit DepositType="deposit"> <Amount AmountType="Actual"> <ValueRange Exact="100.00" /> </Amount> <Description>Escrow Deposit Paid In</Description> <PercentRefundable>100</PercentRefundable> <PortionRefundable>100</PortionRefundable> </Deposit> <File FileID="" Active="true"> <FileType>Floorplan</FileType> <Name>floorplan-krista.jpg</Name> <Format /> <Src>https://resman.blob.core.windows.net/demo-public/d6855366-63ff-4ccd-ab36-e6f15c916226.jpg</Src> <Rank /> </File> <File FileID="26978c6f-3ece-4310-a953-f184a24fdf23" Active="true"> <FileType>Photo</FileType> <Name>Inside.jpg</Name> <Format>.jpg</Format> <Src>https://resman.blob.core.windows.net/demo-public/105f5355-93fd-4a65-8f25-fa630caa7dfb.jpg</Src> <Rank>2</Rank> </File> </Floorplan><Utility> <AirCon>false</AirCon> <BroadbandInternet>true</BroadbandInternet> <Cable>false</Cable> <Electric>false</Electric> <Gas>false</Gas> <Heat>false</Heat> <HotWater>false</HotWater> <Satellite>false</Satellite> <Sewer>false</Sewer> <Telephone>false</Telephone> <Trash>false</Trash> <Water>false</Water> <UtilityPortionIncluded>0.00</UtilityPortionIncluded> </Utility> <File FileID="71fe9d37-17f3-49ef-9df1-1d4b19ee65ad" Active="true"> <FileType>Photo</FileType> <Name>IMG_1090.jpg</Name> <Format>.jpg</Format> <Src>https://resman.blob.core.windows.net/demo-public/f112e064-c35e-4495-a327-34a4cee895d3.jpg</Src> <Rank>12</Rank> </File> <File FileID="5e3c45b9-d6a7-4e80-a11c-311f194c937a" Active="true"> <FileType>Photo</FileType> <Name>12 Ext-3.jpg</Name> <Format>.jpg</Format> <Src>https://resman.blob.core.windows.net/demo-public/f3ba2d00-440a-4624-9ba7-1ebdf188d4f1.jpg</Src> <Rank>12</Rank> </File> </Property> </PhysicalProperty></Response></ResMan>';
        //strMarketing4_0 = '<ResMan><MethodName>GetMarketing4_0</MethodName><Status>Success</Status><AccountID>400</AccountID><PropertyID>b342e58c-f5ba-4c63-b050-cf44439bb37d</PropertyID><Response><?xml version="1.0" encoding="utf-16"?> <PhysicalProperty xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> <Property> <Identification IDValue="b342e58c-f5ba-4c63-b050-cf44439bb37d" OrganizationName="ResMan" IDType="PropertyID" /> <Identification IDValue="400" OrganizationName="ResMan" IDType="AccountID" /> <PropertyID> <Identification IDValue="b342e58c-f5ba-4c63-b050-cf44439bb37d" OrganizationName="ResMan" IDType="PropertyID" /> <MarketingName>Frontline Fairways</MarketingName> <Address AddressType="Property"> <City>Broomfield</City> <State>CO</State> <PostalCode> </PostalCode> <Country>United States</Country> </Address> <Phone PhoneType="personal"> <PhoneNumber> </PhoneNumber> </Phone> <Phone PhoneType="fax"> <PhoneNumber> </PhoneNumber> </Phone> <Email>Info@falsewebsite.com</Email> </PropertyID> <ILS_Identification ILS_IdentificationType="Unspecified" RentalType="Unspecified"> <Latitude>29.42729</Latitude> <Longitude>-98.652874</Longitude> </ILS_Identification> <Information> <StructureType>Unspecified</StructureType> <BuildingCount>18</BuildingCount> <UnitCount>293</UnitCount> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>10:00 AM</CloseTime> <Day>Sunday</Day> </OfficeHour> <OfficeHour> <OpenTime>2:00 PM</OpenTime> <CloseTime>4:00 PM</CloseTime> <Day>Sunday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Monday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Tuesday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Wednesday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Thursday</Day> </OfficeHour> <OfficeHour> <OpenTime>8:00 AM</OpenTime> <CloseTime>6:00 PM</CloseTime> <Day>Friday</Day> </OfficeHour> <OfficeHour> <OpenTime>10:00 AM</OpenTime> <CloseTime>4:00 PM</CloseTime> <Day>Saturday</Day> </OfficeHour> <ShortDescription>Live A Luxurious Life Style At ABC Property</ShortDescription> <LongDescription>ABC Property is a beautiful, pet friendly community.Convenient and easy access to major highways. The community features a resort style pool, access gates, car care station, pet walk courtyards,health and sports complex. ABC Property features 1, 2, and 3 bedroom apartments for rent with washer/dryer provided, tanning facility, stainless steal appliances, business center, High Speed Internet and more.</LongDescription> <LeaseLength>12 month leases</LeaseLength> <Parking ParkingType="Covered Lot"> <Assigned>false</Assigned> <AssignedFee>Paid</AssignedFee> <SpaceFee>35.00</SpaceFee> <Spaces>5</Spaces> <Comment>Only 5 Covered Parking Spaces Left Don\'t Chance It Texas Weather!</Comment> </Parking> <DrivingDirections>Driving directions to the property</DrivingDirections> <Services Nearest="true"> <Name>Elementary School</Name> <Detail>Barton Elementary </Detail> <DistanceTo>less than a mile away</DistanceTo> <Comment>Close to home</Comment> </Services> <Services Nearest="true"> <Name>Highway</Name> <Detail>Close To All Major Highways</Detail> <DistanceTo>Highway 121 1 street light from the property and 8 minutes from Highway 75 !</DistanceTo> </Services> <Services Nearest="false"> <Name>Other</Name> <Detail>Tanning Facility</Detail> <DistanceTo>Property Clubhouse</DistanceTo> <Comment>Ask an associate about all of the amenities available!</Comment> </Services> <PropertyAvailabilityURL>https://demo.myresman.com/Portal/Applicants/Availability?a=400&amp;p=b342e58c-f5ba-4c63-b050-cf44439bb37d</PropertyAvailabilityURL> </Information> <Fee> <ProrateType>Standard</ProrateType> <LateType>Flat</LateType> <LatePercent>0</LatePercent> <LateMinFee>10.0000</LateMinFee> <LateFeePerDay>50.0000</LateFeePerDay> <NonRefundableHoldFee>0</NonRefundableHoldFee> <AdminFee>149.0000</AdminFee> <ApplicationFee>0</ApplicationFee> <BrokerFee>0</BrokerFee> </Fee> <Amenity AmenityType="Availability24Hours"> <Description>Secure entry</Description> </Amenity> <Amenity AmenityType="CarWashArea"> <Description>Free Car Wash</Description> </Amenity> <Amenity AmenityType="Pool"> <Description>Community Pool</Description> </Amenity> <Amenity AmenityType="BusinessCenter"> <Description>24 Hour Business Center</Description> </Amenity> <Amenity AmenityType="VolleyballCourt"> <Description>Volleyball Court</Description> </Amenity> <Building> <Identification IDValue="15" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>15</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="11" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>11</Name> <Description /> <UnitCount>12</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="8" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>8</Name> <Description /> <UnitCount>8</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="Ramiro\'s Place" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>Ramiro\'s Place</Name> <Description /> <UnitCount>1</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="17" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>17</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="1" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>1</Name> <Description /> <UnitCount>39</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="7" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>7</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="16" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>16</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="5" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>5</Name> <Description /> <UnitCount>12</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="10" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>10</Name> <Description /> <UnitCount>8</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="9" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>9</Name> <Description /> <UnitCount>13</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="14" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>14</Name> <Description /> <UnitCount>12</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="2" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>2</Name> <Description /> <UnitCount>17</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="12" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>12</Name> <Description /> <UnitCount>23</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="13" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>13</Name> <Description /> <UnitCount>12</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="4" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>4</Name> <Description /> <UnitCount>8</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="3" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>3</Name> <Description /> <UnitCount>24</UnitCount> <SquareFeet>0</SquareFeet> </Building> <Building> <Identification IDValue="6" OrganizationName="ResMan" IDType="Name" /> <BuildingType>Unspecified</BuildingType> <Name>6</Name> <Description /> <UnitCount>8</UnitCount> <SquareFeet>0</SquareFeet> </Building><Utility> <AirCon>false</AirCon> <BroadbandInternet>true</BroadbandInternet> <Cable>false</Cable> <Electric>false</Electric> <Gas>false</Gas> <Heat>false</Heat> <HotWater>false</HotWater> <Satellite>false</Satellite> <Sewer>false</Sewer> <Telephone>false</Telephone> <Trash>false</Trash> <Water>false</Water> <UtilityPortionIncluded>0.00</UtilityPortionIncluded> </Utility> <File FileID="71fe9d37-17f3-49ef-9df1-1d4b19ee65ad" Active="true"> <FileType>Photo</FileType> <Name>IMG_1090.jpg</Name> <Format>.jpg</Format> <Src>https://resman.blob.core.windows.net/demo-public/f112e064-c35e-4495-a327-34a4cee895d3.jpg</Src> <Rank>12</Rank> </File> <File FileID="5e3c45b9-d6a7-4e80-a11c-311f194c937a" Active="true"> <FileType>Photo</FileType> <Name>12 Ext-3.jpg</Name> <Format>.jpg</Format> <Src>https://resman.blob.core.windows.net/demo-public/f3ba2d00-440a-4624-9ba7-1ebdf188d4f1.jpg</Src> <Rank>12</Rank> </File> </Property> </PhysicalProperty></Response></ResMan>';
        
        List<String> tempParts = strMarketing4_0.split('\\<Floorplan');
        
        String PropertiesStringParts =  tempParts.get(0);
        PropertiesStringParts = PropertiesStringParts.replace('<?xml version="1.0" encoding="utf-16"?>', '');
        
        List<String> LastStringParts = new List<String>();
        tempParts.remove(0);
        
        if( tempParts.size() > 0 ) {
            
            Integer LastElement = tempParts.size()-1;
            String tempString = tempParts.get(LastElement);
            
            LastStringParts = tempString.split('\\<\\/ILS_Unit\\>');
            
            if( LastStringParts.size() > 0 ) {
                PropertiesStringParts = PropertiesStringParts + LastStringParts.get(LastStringParts.size()-1);
            } else {
                LastStringParts = tempString.split('\\<\\/Floorplan\\>');
                PropertiesStringParts = PropertiesStringParts + LastStringParts.get(LastStringParts.size()-1);
            }
        }

        if( null != PropertiesStringParts ) {
            XmlStreamReader reader       = new XmlStreamReader( PropertiesStringParts );
            objRMPullPropertiesResponse   = new RMPullPropertiesResponseController();
            objRMPullPropertiesResponse.parsePropertyResponse( reader );
        }
    }
}